
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    match /sharedContent/{contentId} {
      // Qualquer pessoa pode ler um conteúdo compartilhado que está ativo
      allow read: if resource.data.status == 'ACTIVE';

      // O criador pode atualizar (ex: para deletar logicamente)
      allow update: if request.auth != null && request.auth.uid == resource.data.creatorId;

      // Qualquer usuário autenticado pode criar
      allow create: if request.auth != null;
      
      // Ninguém pode deletar diretamente
      allow delete: if false;
    }
  }
}
